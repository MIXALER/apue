## 1 系统编程简介

- c 语言简介
  - c 语言数据类型，变量，编译链接，c11 标准
- 操作系统简介
  - 操作系统历史，现代操作系统的角色，编程语言，程序和操作系统间的关系
- 操作系统硬件总览
  - 处理器和它的寄存器，分级内存体系，I/O 和存储设备
- c 语言进阶
  - 数组和字符串，用户自定义类型和结构体，计算机硬件如何表示数据，函数，参数传递和返回值
- 操作系统服务
  - 创建和终止进程，程序的运行时环境，命令行参数，用 c 获取操作系统服务
- 内存管理
  - 分配物理内存给进程，多进程间共享内存，c 程序中分配和管理内存
- 文件以及在程序中的使用文件
  - 文件管理系统，文件分配方法，文件和目录操作和属性，文件与 I/O，格式化与非格式化 I/O，缓冲和非缓冲的 I/O 函数

### 1.1 POSIX 和 c11

### 1.2 为啥是 c

- Linux，Windows，macOS
- 网络接口，网络协议，web 服务器
- 许多现有的软件，驱动
- 嵌入式设备，汽车，飞机，机器人。。。。

### 1.3 c 的特点

- 系统级的编程语言
- 在不同的架构上具有可移植性
- 需要一个可移植的 c 编译器
- 有时候需要嵌入汇编
- c 可阅读性较差
- c 执行过程中的一些缺点

## 2 操作系统简介

什么是操作系统：

- 为用户程序的执行提供方便、有效的环境的一种系统软件。
- 很可能是最大的，最复杂的程序

为啥需要操作系统

- 用户的角度
  - 提供用户接口，命令行解释器，目录结构，并执行应用程序
- 编程环境的角度
  - 封装，抽象计算机的硬件资源（机器指令）。提供编程工具链（编译器，编辑器），提供高级的 I/O 接口，维护内存的访问。
- 从效率的角度
  - 替换(已离开很久的)人工操作员，到调度任务，到高效存储和检索数据，到调用和共享程序
- 从经济的角度
  - 允许同时使用和调度资源，包括磁盘绑定数据和昂贵的外围设备。

总之，操作系统的目标是让整个系统更加的便于使用并且高效且公平地调度资源，除此之外还要支持软件和硬件的未来发展。

## 3 操作系统硬件总览

<img src="D:\workspace\apue\docs\assets\image-20210926132442646.png" alt="image-20210926132442646" style="zoom:50%;" />

<img src="D:\workspace\apue\docs\assets\image-20210926132720723.png" alt="image-20210926132720723" style="zoom:50%;" />

### 3.1 处理器寄存器

cpu 除了具有逻辑运算，算术运算，和控制模块以外，还有一些非常快速的存储器。

- 首先这些寄存器读取速度非常的快
- 通过寄存器的数量，每个寄存器的位数决定了 cpu 的速度和性能
- 处理器对寄存器的使用添加限制。整数寄存器，浮点数寄存器。

### 3.2 处理器寄存器的作用

目前还是存算分离的时代。

所有需要 cpu 处理的数据必须先复制到寄存器中去。cpu 不能直接运算存放在内存中的数据。

数据先放入寄存器中，操作在寄存器上运行，然后结果放入寄存器中，最后再将结果拷贝到内存上去。

寄存器通常也用来保存内存地址，用来指示从内存的哪项开始读取内容。

内存与寄存器之间的传输对用户包括是程序是完全透明的

通常我们能用汇编语言来操作内存，c 语言不能直接操作内存

### 3.3 寄存器种类

用户可以操作的寄存器

数据寄存器：存放具体指令执行时所需要的值，保存

地址寄存器

操作系统硬件简介

操作系统服务

内存管理

文件操作

第一周全是 c 语言相关的基础知识

第二周操作系统简介和c入门

第三周操作系统硬件基础，c 数组结构体

第四周，进程，进程调度与进程控制，c 文件操作



## 4 进程

操作系统的基本活动是进程的创建，管理和终止

什么是进程

- 正在执行的程序
- 一个程序的执行状态
- 由操作系统在处理器上执行的可识别的实体

从操作系统的角度

- 程序的可执行实例
- 作为程序操作的相关数据（变量，临时结果，外部文件）
- 程序执行的上下文环境

现代操作系统的一个明确要求是，通过最大限度地使用处理器、支持进程间通信和保持合理的响应时间，使许多进程能够有效地执行。

4.1 进程状态

4.2 进程创建

为了支持新进程的创建，操作系统必须为进程和操作系统本身分配资源

进程(正在执行的程序)将需要一部分可用内存来包含它的(通常是只读的)指令和初始数据需求。当进程执行时，它将为它的执行堆栈和堆要求额外的内存。

操作系统（作为一个调度者）需要维护一些内部控制结构来支持进程状态间的转移



4.3 进程终止

- 正常的终止
- 执行的时间片用完
- 请求资源不存在
- 算术错误，除零错
- 非法请求内存和被持有的资源
- 操作系统或父进程请求

**时间中断**

为什么进程要从运行态变为准备态

操作系统必须达到两个目的：进程间的公平性和最大化利用资源。

**进程挂起**

通常，一个进程会向低速设备请求一些 I/O 操作。

从处理器的角度看进程比较简单：



## 内存管理







